# For more information about tox, see https://tox.readthedocs.io/en/latest/
[tox]
envlist = py{38,39,310}
isolated_build = true

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310

[testenv]
extras = testing
allowlist_externals =
    mkdir
    cp
commands =
    - mkdir {envdir}/baseline
    - cp -R {toxinidir}/src/napari_matplotlib/tests/baseline {envdir}/baseline
    - python -c 'from skimage.data import download_all; download_all()'
    - python -m pytest --mpl -v --color=yes --cov=napari_matplotlib --cov-report=xml
